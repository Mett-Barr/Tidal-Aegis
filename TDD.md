# Tidal-Aegis æŠ€æœ¯æ¶æ„éªŒè¯è·¯çº¿å›¾

> **é¡¹ç›®å®šä½**: RTS Roguelike - æˆ˜æœ¯ç¼–æ’ + å‡çº§å¤šæ ·æ€§  
> **æŠ€æœ¯ç›®æ ‡**: å¯éªŒè¯çš„æŠ€æœ¯éª¨æ¶ï¼Œä¿è¯æ‰©å±•æ€§ä¸ç¨³å®šæ€§  
> **è®¾è®¡åŸåˆ™**: å®Œç¾æ¨¡å—åŒ– + æ•°æ®é©±åŠ¨ + é›¶è€¦åˆ  
> **æ–‡æ¡£ç‰ˆæœ¬**: v2.0 (Technical Focus)  
> **æ›´æ–°æ—¥æœŸ**: 2025-11-26

---

## ğŸ¯ æ ¸å¿ƒæŠ€æœ¯æ”¯æŸ± (Technical Pillars)

### è¯„ä»·æ ‡å‡†ï¼ˆé»„é‡‘æ ‡å‡†ï¼‰
æ¯ä¸ªæŠ€æœ¯æ¨¡å—å¿…é¡»æ»¡è¶³ï¼š
- âœ… **å¯éªŒè¯æ€§ (Verifiable)**: å¯é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•æˆ– Editor å·¥å…·éªŒè¯
- âœ… **æ‰©å±•æ€§ (Extensible)**: æ–°å¢å†…å®¹æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
- âœ… **ç¨³å®šæ€§ (Stable)**: è¾¹ç•Œæ¡ä»¶ã€å¼‚å¸¸å¤„ç†å®Œå–„
- âœ… **è§£è€¦æ€§ (Decoupled)**: æ¨¡å—é—´é›¶ä¾èµ–æˆ–å•å‘ä¾èµ–
- âœ… **æ•°æ®é©±åŠ¨ (Data-Driven)**: é€»è¾‘ä¸æ•°æ®åˆ†ç¦»

---

## ğŸ“Š æŠ€æœ¯æ¨¡å—å®Œæˆåº¦çŸ©é˜µ

| æŠ€æœ¯æ¨¡å— | å¯éªŒè¯ | æ‰©å±•æ€§ | ç¨³å®šæ€§ | è§£è€¦æ€§ | æ•°æ®é©±åŠ¨ | ç»¼åˆè¯„åˆ† |
|---------|-------|-------|-------|-------|---------|---------|
| **ç¼–è¾‘å™¨å·¥å…·** | âœ… | âœ… | âœ… | âœ… | âœ… | **100%** |
| **æ•°æ®æ¶æ„** | âœ… | âœ… | âœ… | âœ… | âœ… | **100%** |
| **ç‰©ç†å¼•æ“** | âœ… | âœ… | âœ… | âœ… | âœ… | **100%** |
| **æ­¦å™¨ç³»ç»Ÿ** | âœ… | âœ… | âœ… | âœ… | âœ… | **100%** |
| **é£å¼¹ç³»ç»Ÿ** | âœ… | âœ… | âœ… | âœ… | âœ… | **100%** |
| **VFX ç³»ç»Ÿ** | âœ… | âœ… | âœ… | âœ… | âœ… | **100%** |
| **å•ä½ç³»ç»Ÿ** | âœ… | âœ… | âš ï¸ | âœ… | âœ… | **90%** |
| **ç¼–é˜Ÿç³»ç»Ÿ** | âŒ | âŒ | âŒ | - | - | **0%** |
| **å‘½ä»¤ç³»ç»Ÿ** | âŒ | âŒ | âŒ | - | - | **0%** |
| **å‡çº§ç³»ç»Ÿ** | âŒ | âŒ | âŒ | - | - | **0%** |
| **AI æ¡†æ¶** | âŒ | âŒ | âŒ | - | - | **0%** |
| **ä¿å­˜ç³»ç»Ÿ** | âŒ | âŒ | âŒ | - | - | **0%** |


---

## ğŸ“– è¯¦ç»†æŠ€æœ¯æ–‡æ¡£ç´¢å¼• (Detailed Documentation)

æœ¬æ–‡æ¡£æä¾›**æŠ€æœ¯æ¦‚è§ˆä¸è¿›åº¦è¿½è¸ª**ã€‚å…·ä½“å®ç°ç»†èŠ‚ã€æ¶æ„è§„èŒƒã€ä½¿ç”¨æŒ‡å—ç­‰è¯¦è§ä»¥ä¸‹ç‹¬ç«‹æ–‡æ¡£ï¼š

### æ ¸å¿ƒç³»ç»Ÿè§„èŒƒ
- ğŸ“‹ **[å¼€å‘è§„èŒƒ](Documentation/DEVELOPMENT_STANDARDS.md)** - Rebuild World å·¥ä½œæµä¸è‡ªåŠ¨åŒ–è¦æ±‚
- ğŸ› ï¸ **[ç¼–è¾‘å™¨å·¥å…·ç³»ç»Ÿ](Documentation/EDITOR_TOOLS.md)** - Generator æ¨¡å¼ã€èœå•ç®¡ç†ã€èµ„æºç”Ÿæˆæµç¨‹

### å·²å®Œæˆç³»ç»Ÿè¯¦è¿°
- ğŸ¯ **[æ­¦å™¨ç³»ç»Ÿ](Documentation/WEAPON_SYSTEM.md)** - ç‚®å¡”æ¶æ„ã€é«˜çº§é¢„åˆ¤ç„å‡†ã€å¤šç‚®ç®¡æ”¯æŒ
  - 2-Axis æ—‹è½¬æœºåˆ¶
  - Pivot-Centric ç„å‡†ç­–ç•¥
  - é«˜çº§é¢„åˆ¤ç®—æ³•ï¼ˆäºŒé˜¶æ‹¦æˆªï¼‰
  
- ğŸš€ **[é£å¼¹ç³»ç»Ÿ](Documentation/MISSILE_SYSTEM.md)** - ä¸‰æ®µå¼é£è¡Œè·¯å¾„ã€æ°´å¹³å·¡èˆªè®¾è®¡
  - VLS â†’ Cruise â†’ Terminal çŠ¶æ€æœº
  - æ°´å¹³è·ç¦»åˆ¤æ–­åŸç†
  - ç»ˆç«¯è·ç¦»è®¡ç®—å…¬å¼

- âœ¨ **[VFX ç³»ç»Ÿ](Documentation/VFX_SYSTEM.md)** - ç‰¹æ•ˆç”Ÿæˆã€å¯¹è±¡æ± ã€æè´¨ç®¡ç†
  - TrailRenderer åŠ¨æ€ç”Ÿæˆ
  - ParticleSystem é…ç½®
  - å¯¹è±¡æ± ä¼˜åŒ–ç­–ç•¥

**é˜…è¯»å»ºè®®**: 
- å¿«é€Ÿäº†è§£ç³»ç»Ÿ â†’ é˜…è¯»æœ¬æ–‡æ¡£ï¼ˆTDD.mdï¼‰æ¦‚è§ˆ
- å®ç°æ–°åŠŸèƒ½ â†’ æŸ¥é˜…å¯¹åº” `Documentation/*.md` è¯¦ç»†è§„èŒƒ
- ä¿®æ”¹ç°æœ‰ç³»ç»Ÿ â†’ å…ˆè¯»è¯¦ç»†æ–‡æ¡£ï¼Œç†è§£è®¾è®¡å†³ç­–

---

## âœ… å·²éªŒè¯æŠ€æœ¯æ¨¡å—ï¼ˆPhase 1: æˆ˜æ–—åŸºç¡€ï¼‰

### 1. ç¼–è¾‘å™¨å·¥å…·é“¾ âœ“ (100%)
**æ¦‚è§ˆ**: ä¸€é”®é‡å»ºä¸–ç•Œï¼Œé›¶æ‰‹åŠ¨æ­¥éª¤çš„è‡ªåŠ¨åŒ–å·¥å…·é“¾ã€‚

**éªŒè¯æ ‡å‡†**: 
- [x] å•é”®é‡å»ºä¸–ç•Œï¼ˆCtrl+Shift+Tï¼‰
- [x] é›¶æ‰‹åŠ¨æ­¥éª¤
- [x] èµ„æºç”Ÿæˆå¯å¤ç°
- [x] é”™è¯¯è‡ªåŠ¨æ£€æµ‹

**æ‰©å±•æ€§éªŒè¯**:
- [x] æ³¨å†Œæ–°å·¥å…·æ— éœ€ä¿®æ”¹æ ¸å¿ƒï¼ˆToolRegistrationï¼‰
- [x] æ–°èµ„æºç±»å‹é€šè¿‡ç»§æ‰¿ Generator åŸºç±»

**æŠ€æœ¯å€ºåŠ¡**: æ— 

---

### 2. æ•°æ®é©±åŠ¨æ¶æ„ âœ“ (100%)
**æ ¸å¿ƒè®¾è®¡**:
```
WeaponConfig (ä»£ç å®šä¹‰) 
    â†“ (Generator)
WeaponStatsSO (ScriptableObject)
    â†“ (Runtime)
WeaponController (è¿è¡Œæ—¶å®ä¾‹)
```

**éªŒè¯æ ‡å‡†**:
- [x] é…ç½®ä¸é€»è¾‘å®Œå…¨åˆ†ç¦»
- [x] æ–°å¢æ­¦å™¨ç±»å‹ä»…éœ€ä¿®æ”¹ WeaponRegistry
- [x] è¿è¡Œæ—¶é›¶åå°„ã€é›¶å­—ç¬¦ä¸²æŸ¥æ‰¾

**æ‰©å±•æ€§éªŒè¯**:
- [x] æ–°å¢æ­¦å™¨ï¼šä»…æ·»åŠ é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- [x] æ–°å¢å±æ€§ï¼šåœ¨ WeaponConfig æ·»åŠ å­—æ®µï¼Œè‡ªåŠ¨æµè½¬åˆ° SO

**æŠ€æœ¯å€ºåŠ¡**: æ— 

---

### 3. ç‰©ç†å¼•æ“ âœ“ (100%)
**æ ¸å¿ƒèƒ½åŠ›**:
- [x] ä¸–ç•Œç¼©æ”¾ç³»ç»Ÿï¼ˆç»Ÿä¸€ Speed/Range ç¼©æ”¾ï¼‰
- [x] åŒç²¾åº¦å¼¹é“è®¡ç®—ï¼ˆhigh-velocity precisionï¼‰
- [x] é¢„æµ‹æ€§æ‹¦æˆªï¼ˆç§»åŠ¨ç›®æ ‡ï¼‰
- [x] è¿åŠ¨å­¦ç§¯åˆ†å™¨ï¼ˆæ¨¡å—åŒ– Movement Functionsï¼‰

**éªŒè¯æ ‡å‡†**:
- [x] å¼¹é“è®¡ç®—è¯¯å·® < 0.1%ï¼ˆé€šè¿‡ Unit Testï¼‰
- [x] æ”¯æŒä»»æ„ gravity multiplier
- [x] é›¶ NaN/Infinity é”™è¯¯

**æ‰©å±•æ€§éªŒè¯**:
- [x] æ–°å¢è¿åŠ¨æ¨¡å¼ï¼šç»§æ‰¿ MovementState æ¥å£
- [x] æ–°å¢é¢„æµ‹å™¨ï¼šå®ç° ITargetPredictor

**æŠ€æœ¯å€ºåŠ¡**: 
- [ ] éœ€æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ï¼ˆå¼¹é“è®¡ç®—æ¨¡å—ï¼‰

---


### 4. æ­¦å™¨ç³»ç»Ÿ âœ“ (100%)
**æ¦‚è§ˆ**: æ¨¡å—åŒ–æ­¦å™¨æ¶æ„ï¼Œæ”¯æŒä¸»ç‚®ã€å‰¯ç‚®ã€CIWSã€å¯¼å¼¹ã€é±¼é›·ã€‚

**æ ¸å¿ƒç‰¹æ€§**:
- [x] **Ammo Layer**: å®šä¹‰å¼¹é“/ä¼¤å®³é€»è¾‘ï¼ˆç‹¬ç«‹äºå¹³å°ï¼‰
- [x] **Platform Layer**: å®šä¹‰æ—‹è½¬/å‘å°„çº¦æŸï¼ˆç‹¬ç«‹äºå¼¹è¯ï¼‰
- [x] **FCS Layer**: ç«æ§ç³»ç»Ÿï¼ˆè¿æ¥ Ammo + Platformï¼‰
- [x] é«˜çº§é¢„åˆ¤ç„å‡†ï¼ˆäºŒé˜¶æ‹¦æˆªç®—æ³• + åŒç²¾åº¦å¼¹é“ï¼‰

**è¯¦ç»†æ–‡æ¡£**: ğŸ‘‰ **[WEAPON_SYSTEM.md](Documentation/WEAPON_SYSTEM.md)**
- ç‚®å¡”å‡ ä½•å¯¹é½æ ‡å‡†ï¼ˆAxis-Alignedï¼‰
- Pivot-Centric ç„å‡†ç­–ç•¥
- é«˜çº§é¢„åˆ¤ç®—æ³•è¯¦è§£
- å¤šç‚®ç®¡å®ç°æ–¹æ¡ˆ

**æŠ€æœ¯å€ºåŠ¡**: 
- [ ] WeaponController é‡æ„ï¼ˆæ‹†åˆ†ä¸º TargetingModule + FiringModuleï¼‰

---

### 5. é£å¼¹ç³»ç»Ÿ âœ“ (100%)
**æ¦‚è§ˆ**: ä¸‰æ®µå¼é£è¡Œè·¯å¾„ï¼Œå®ç°é€¼çœŸçš„ VLS â†’ å·¡èˆª â†’ æ”»é¡¶è½¨è¿¹ã€‚

**æ ¸å¿ƒç‰¹æ€§**:
- [x] Phase 0: å‚ç›´å‘å°„ï¼ˆVLSï¼‰
- [x] Phase 1: çœŸæ­£æ°´å¹³å·¡èˆªï¼ˆé”å®šä¿¯ä»°è§’ï¼‰
- [x] Phase 2: ç»ˆç«¯ä¿¯å†²ï¼ˆé¢„æµ‹æ€§è¿½è¸ªï¼‰
- [x] æ°´å¹³è·ç¦»åˆ¤æ–­ï¼ˆæ¶ˆé™¤é«˜åº¦å¹²æ‰°ï¼‰

**è¯¦ç»†æ–‡æ¡£**: ğŸ‘‰ **[MISSILE_SYSTEM.md](Documentation/MISSILE_SYSTEM.md)**
- ä¸ºä»€ä¹ˆè¦"é”å®šæ°´å¹³"è€Œé"ç»´æŒé«˜åº¦"
- æ°´å¹³è·ç¦» vs 3D è·ç¦»åˆ¤æ–­
- ç»ˆç«¯è·ç¦»è®¡ç®—å…¬å¼æ¨å¯¼
- å¸¸è§é—®é¢˜æ’æŸ¥

**æŠ€æœ¯å€ºåŠ¡**: æ— 

---

### 6. VFX ç³»ç»Ÿ âœ“ (100%)
**æ¦‚è§ˆ**: è‡ªåŠ¨åŒ–ç‰¹æ•ˆç”Ÿæˆä¸ç®¡ç†ï¼Œæ”¯æŒæ‹–å°¾ã€ç«ç„°ã€çˆ†ç‚¸ã€‚

**æ ¸å¿ƒç‰¹æ€§**:
- [x] ç”Ÿæˆå™¨æ¨¡å¼ï¼ˆGenerator â†’ Prefab â†’ Runtimeï¼‰
- [x] å¯¹è±¡æ± ç®¡ç†ï¼ˆVFXManagerï¼‰
- [x] é›¶ç¡¬ç¼–ç ï¼ˆæè´¨/é¢œè‰²é€šè¿‡é…ç½®ï¼‰
- [x] TrailRenderer + ParticleSystem è‡ªåŠ¨é…ç½®

**è¯¦ç»†æ–‡æ¡£**: ğŸ‘‰ **[VFX_SYSTEM.md](Documentation/VFX_SYSTEM.md)**
- VFX ç”Ÿæˆæµç¨‹è¯¦è§£
- æè´¨ä¸ Shader ç®¡ç†
- å¯¹è±¡æ± å®ç°ç»†èŠ‚
- è°ƒè¯•ä¸æ•…éšœæ’æŸ¥

**æŠ€æœ¯å€ºåŠ¡**: æ— 


---

## ğŸš§ å¾…éªŒè¯æŠ€æœ¯æ¨¡å—ï¼ˆPhase 2: RTS æ ¸å¿ƒï¼‰

### 7. ç¼–é˜Ÿç³»ç»Ÿ (Formation System) â­â­â­
**æŠ€æœ¯è¦æ±‚**:
- [ ] **æ•°å­¦æ¨¡å‹**: æ”¯æŒä»»æ„å½¢çŠ¶ï¼ˆV å­—/çº¿é˜µ/åœ†é˜µï¼‰
- [ ] **åŠ¨æ€é‡ç»„**: å•ä½æŸå¤±åè‡ªåŠ¨å¡«è¡¥
- [ ] **ç¢°æ’é¿å…**: å•ä½é—´ä¿æŒé—´è·
- [ ] **è½¬å‘åè°ƒ**: ç¼–é˜Ÿæ•´ä½“è½¬å‘ä¿æŒé˜µå‹

**æ¶æ„è®¾è®¡**:
```
FormationConfig (æ•°æ®)
    â†“
FormationController (é€»è¾‘)
    â†“
UnitPositionProvider (æ¥å£)
    â†“
Individual Unit Movement
```

**éªŒè¯æ ‡å‡†**:
- [ ] ç¼–é˜Ÿå½¢çŠ¶å¯æ•°æ®åŒ–å®šä¹‰ï¼ˆJSON/SOï¼‰
- [ ] æ”¯æŒ 100+ å•ä½ç¼–é˜Ÿï¼ˆæ€§èƒ½æµ‹è¯•ï¼‰
- [ ] è½¬å‘æ—¶æ— å•ä½ç¢°æ’ï¼ˆè¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼‰

**å‚è€ƒæ ‡å‡†**: StarCraft II ç¼–é˜Ÿç³»ç»Ÿï¼ˆCraig Reynolds Flockingï¼‰

**é¢„è®¡å·¥ä½œé‡**: 2 å‘¨ï¼ˆå«æµ‹è¯•ï¼‰

---

### 8. å‘½ä»¤ç³»ç»Ÿ (Command System) â­â­â­
**æŠ€æœ¯è¦æ±‚**:
- [ ] **å‘½ä»¤é˜Ÿåˆ—**: æ”¯æŒå¤šæ­¥æŒ‡ä»¤ï¼ˆMove â†’ Attack â†’ Holdï¼‰
- [ ] **å‘½ä»¤æ’¤é”€**: å®ç° Command Pattern
- [ ] **å‘½ä»¤éªŒè¯**: éæ³•æŒ‡ä»¤è‡ªåŠ¨æ‹’ç»
- [ ] **å‘½ä»¤åŒæ­¥**: å¤šå•ä½ååŒï¼ˆç¼–é˜Ÿæ”»å‡»ï¼‰

**æ¶æ„è®¾è®¡**:
```
ICommand æ¥å£
    â”œâ”€â”€ MoveCommand
    â”œâ”€â”€ AttackCommand
    â”œâ”€â”€ FormationCommand
    â””â”€â”€ HoldCommand

CommandQueue (per unit/formation)
CommandExecutor (è¿è¡Œæ—¶)
```

**éªŒè¯æ ‡å‡†**:
- [ ] å‘½ä»¤å¯åºåˆ—åŒ–ï¼ˆä¿å­˜/è¯»å–ï¼‰
- [ ] æ”¯æŒå®å‘½ä»¤ï¼ˆå¤æ‚æˆ˜æœ¯é“¾ï¼‰
- [ ] å‘½ä»¤æ‰§è¡Œæ— å»¶è¿Ÿï¼ˆ< 16msï¼‰

**å‚è€ƒæ ‡å‡†**: Command & Conquer å‘½ä»¤ç³»ç»Ÿ

**é¢„è®¡å·¥ä½œé‡**: 1.5 å‘¨

---

### 9. å‡çº§ç³»ç»Ÿ (Upgrade/Roguelike System) â­â­â­
**æŠ€æœ¯è¦æ±‚**:
- [ ] **Modifier æ¶æ„**: å±æ€§å¯å åŠ /è¦†ç›–
- [ ] **åŠ¨æ€ç”Ÿæ•ˆ**: è¿è¡Œæ—¶åŠ è½½ Upgrade
- [ ] **å†²çªæ£€æµ‹**: äº’æ–¥å‡çº§è‡ªåŠ¨ç¦ç”¨
- [ ] **åºåˆ—åŒ–**: å‡çº§çŠ¶æ€å¯ä¿å­˜

**æ¶æ„è®¾è®¡**:
```
UpgradeConfig (æ•°æ®)
    â†“
UpgradeModifier (è¿è¡Œæ—¶æ•ˆæœ)
    â†“
StatModifierStack (åº”ç”¨åˆ° Unit/Weapon)
```

**éªŒè¯æ ‡å‡†**:
- [ ] å‡çº§å¯é€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰ï¼ˆé›¶ä»£ç ï¼‰
- [ ] æ”¯æŒ 100+ ç§å‡çº§ç»„åˆ
- [ ] å±æ€§è®¡ç®—æ­£ç¡®æ€§ï¼ˆåŠ æ³•/ä¹˜æ³•ä¼˜å…ˆçº§ï¼‰

**å‚è€ƒæ ‡å‡†**: Hades Boon ç³»ç»Ÿã€Slay the Spire Relic ç³»ç»Ÿ

**é¢„è®¡å·¥ä½œé‡**: 2 å‘¨

---

### 10. AI æ¡†æ¶ (AI Framework) â­â­
**æŠ€æœ¯è¦æ±‚**:
- [ ] **è¡Œä¸ºæ ‘ (Behavior Tree)**: æ¨¡å—åŒ– AI é€»è¾‘
- [ ] **ç›®æ ‡è¯„ä¼°**: å¨èƒå€¼è®¡ç®—
- [ ] **è·¯å¾„è§„åˆ’**: A* æˆ– Flow Field
- [ ] **å†³ç­–ç¼“å­˜**: é¿å…æ¯å¸§é‡è®¡ç®—

**æ¶æ„è®¾è®¡**:
```
AIController (é¡¶å±‚)
    â”œâ”€â”€ BehaviorTree (è¡Œä¸ºé€»è¾‘)
    â”œâ”€â”€ ThreatEvaluator (ç›®æ ‡é€‰æ‹©)
    â””â”€â”€ PathPlanner (ç§»åŠ¨è§„åˆ’)
```

**éªŒè¯æ ‡å‡†**:
- [ ] AI è¡Œä¸ºå¯é…ç½®ï¼ˆæ— éœ€ç¼–ç¨‹ï¼‰
- [ ] æ”¯æŒ 50+ AI å•ä½åŒæ—¶è¿è¡Œï¼ˆæ€§èƒ½ï¼‰
- [ ] AI å†³ç­–å¯å›æ”¾ï¼ˆè°ƒè¯•ï¼‰

**å‚è€ƒæ ‡å‡†**: GOAP (Goal-Oriented Action Planning) æˆ– Utility AI

**é¢„è®¡å·¥ä½œé‡**: 3 å‘¨

---

### 11. ä¿å­˜/åŠ è½½ç³»ç»Ÿ (Persistence System) â­â­
**æŠ€æœ¯è¦æ±‚**:
- [ ] **å®Œæ•´çŠ¶æ€åºåˆ—åŒ–**: å•ä½/æ­¦å™¨/å‡çº§
- [ ] **ç‰ˆæœ¬å…¼å®¹**: æ—§å­˜æ¡£è‡ªåŠ¨å‡çº§
- [ ] **æ ¡éªŒå’Œ**: é˜²ç¯¡æ”¹æ£€æµ‹
- [ ] **å¢é‡ä¿å­˜**: ä»…ä¿å­˜å˜åŒ–éƒ¨åˆ†

**æ¶æ„è®¾è®¡**:
```
ISaveable æ¥å£
    â”œâ”€â”€ UnitState
    â”œâ”€â”€ WeaponState
    â””â”€â”€ UpgradeState

SaveManager (åºåˆ—åŒ–/ååºåˆ—åŒ–)
```

**éªŒè¯æ ‡å‡†**:
- [ ] ä¿å­˜æ–‡ä»¶å¤§å° < 1MB
- [ ] ä¿å­˜/åŠ è½½æ—¶é—´ < 100ms
- [ ] 100% çŠ¶æ€å¤åŸï¼ˆæ— æ•°æ®ä¸¢å¤±ï¼‰

**å‚è€ƒæ ‡å‡†**: Factorio ä¿å­˜ç³»ç»Ÿï¼ˆé«˜æ•ˆåºåˆ—åŒ–ï¼‰

**é¢„è®¡å·¥ä½œé‡**: 1.5 å‘¨

---

## ğŸ”¬ æŠ€æœ¯éªŒè¯æ¸…å•ï¼ˆæ¯ä¸ªæ¨¡å—å¿…é¡»é€šè¿‡ï¼‰

### Phase 1: æ¶æ„è®¾è®¡
- [ ] ç”»å‡º UML ç±»å›¾ï¼ˆæ ¸å¿ƒç±»å…³ç³»ï¼‰
- [ ] å®šä¹‰æ¥å£å¥‘çº¦ï¼ˆICommand, IFormation, etc.ï¼‰
- [ ] ç¡®å®šæ•°æ®æµå‘ï¼ˆå•å‘/åŒå‘ï¼‰
- [ ] è¯„å®¡æ¶æ„ï¼ˆCodeReviewï¼‰

### Phase 2: åŸå‹å®ç°
- [ ] å®ç°æœ€å°å¯éªŒè¯åŸå‹ï¼ˆMVPï¼‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
- [ ] é€šè¿‡è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆnull/ç©ºæ•°ç»„/æå€¼ï¼‰
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼ˆProfilerï¼‰

### Phase 3: é›†æˆæµ‹è¯•
- [ ] ä¸ç°æœ‰ç³»ç»Ÿé›†æˆï¼ˆæ— å†²çªï¼‰
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆå®Œæ•´æµç¨‹ï¼‰
- [ ] å‹åŠ›æµ‹è¯•ï¼ˆ100+ å•ä½ï¼‰
- [ ] å†…å­˜æ³„æ¼æ£€æµ‹ï¼ˆé•¿æ—¶é—´è¿è¡Œï¼‰

### Phase 4: æ–‡æ¡£åŒ–
- [ ] æ›´æ–° ARCHITECTURE.md
- [ ] ç¼–å†™ä½¿ç”¨ç¤ºä¾‹ï¼ˆHow-toï¼‰
- [ ] API æ–‡æ¡£ï¼ˆä»£ç æ³¨é‡Šï¼‰
- [ ] æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰

---

## ğŸ“ æ¶æ„è®¾è®¡åŸåˆ™ï¼ˆDesign Philosophyï¼‰

### æ ¸å¿ƒå“²å­¦ï¼šA Philosophy of Software Design (John Ousterhout)

#### 1. Deep Modulesï¼ˆæ·±æ¨¡å—ï¼‰> Shallow Modules
**æ ¸å¿ƒç†å¿µ**: æ¥å£ç®€å•ï¼Œå®ç°å¼ºå¤§ã€‚

**åä¾‹** (Shallow):
```csharp
class BallisticCalculator {
    public Vector3 CalculateVelocity(...) { }
    public float CalculateFlightTime(...) { }
    public float CalculateAngle(...) { }
    public bool CheckRange(...) { }
}
```
**é—®é¢˜**: æ¥å£å¤æ‚ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½éœ€è¦å®¢æˆ·ç«¯ç†è§£å†…éƒ¨é€»è¾‘ã€‚

**æ­£ä¾‹** (Deep):
```csharp
public static class BallisticsComputer {
    // ç®€å•æ¥å£ï¼šä¸€ä¸ªæ–¹æ³•è§£å†³æ‰€æœ‰é—®é¢˜
    public static bool SolveInterception(
        Vector3 origin, 
        float speed, 
        float gravity, 
        ITargetPredictor target,
        out Vector3 fireVelocity,
        out float impactTime
    );
    // å¤æ‚å®ç°éšè—åœ¨å†…éƒ¨ï¼ˆè¿­ä»£æ±‚è§£ã€å¼¹é“æ–¹ç¨‹ã€é¢„æµ‹é€»è¾‘ï¼‰
}
```

**å½“å‰å®è·µ**:
- âœ… `BallisticsComputer.SolveInterception` (Deep)
- âœ… `WeaponAssetGenerator.GenerateAll()` (Deep)
- âš ï¸ `WeaponController` (200+ è¡Œï¼Œéœ€æ‹†åˆ†ä½†ä¿æŒæ¥å£ç®€å•)

---

#### 2. Pull Complexity Downwardï¼ˆä¸‹æ²‰å¤æ‚åº¦ï¼‰
**æ ¸å¿ƒç†å¿µ**: è®©æ¨¡å—è‡ªå·±å¤„ç†å¤æ‚æ€§ï¼Œè€Œä¸æ˜¯æš´éœ²ç»™ç”¨æˆ·ã€‚

**åä¾‹**:
```csharp
// å®¢æˆ·ç«¯éœ€è¦ç†è§£ Predictor åˆ›å»ºé€»è¾‘
var predictor = target.GetComponent<IPredictionProvider>() != null
    ? target.GetComponent<IPredictionProvider>().GetPredictor(...)
    : new LinearTargetPredictor(...);
aimingLogic(origin, stats, target, predictor);
```

**æ­£ä¾‹**:
```csharp
// WeaponController å†…éƒ¨å¤„ç† Predictor é€»è¾‘
private ITargetPredictor GetPredictorForTarget() {
    // å¤æ‚åˆ¤æ–­ä¸‹æ²‰åˆ°æ–¹æ³•å†…éƒ¨
    var provider = currentTarget.GetComponent<IPredictionProvider>();
    if (provider != null) return provider.GetPredictor(...);
    return new LinearTargetPredictor(...);
}
```

**å½“å‰å®è·µ**:
- âœ… `WeaponController.GetPredictorForTarget()` éšè—å¤æ‚æ€§
- âœ… `MovementFunctions.Resolve()` éšè—å­—ç¬¦ä¸²åŒ¹é…é€»è¾‘

---

#### 3. Define Errors Out of Existenceï¼ˆæ¶ˆé™¤é”™è¯¯æ¡ä»¶ï¼‰
**æ ¸å¿ƒç†å¿µ**: é€šè¿‡è®¾è®¡æ¶ˆé™¤è¾¹ç•Œæ¡ä»¶ï¼Œè€Œéæ£€æŸ¥ã€‚

**åä¾‹**:
```csharp
if (speed < 0.001f) throw new ArgumentException();
if (gravity < 0) throw new ArgumentException();
```

**æ­£ä¾‹**:
```csharp
// è®¾è®¡ä¸Šæ¶ˆé™¤é”™è¯¯ï¼šä½¿ç”¨ Mathf.Abs è‡ªåŠ¨ä¿®æ­£
float g = Mathf.Abs(gravity);
// è®¾è®¡ä¸Šæ¶ˆé™¤é”™è¯¯ï¼šä½¿ç”¨ Mathf.Max é˜²æ­¢é™¤é›¶
float speed = Mathf.Max(currentSpeed, 0.001f);
```

**å½“å‰å®è·µ**:
- âœ… `GuidedMissile` ä½¿ç”¨ `speed < 0.001f ? return state` è€ŒéæŠ›å¼‚å¸¸
- âœ… å¼¹é“è®¡ç®—ä½¿ç”¨ `root < 0 ? return null` è¡¨ç¤ºæ— è§£

---

#### 4. Strategic Programmingï¼ˆæˆ˜ç•¥ç¼–ç¨‹ï¼‰> Tactical Programming
**æ ¸å¿ƒç†å¿µ**: æŠ•èµ„äºæ¶æ„ï¼Œè€Œéå¿«é€Ÿå †ç Œä»£ç ã€‚

**Tactical** (å¿«é€Ÿä½†å€ºåŠ¡é«˜):
```csharp
// ç¡¬ç¼–ç ï¼Œéš¾ä»¥æ‰©å±•
if (weaponType == "Missile") {
    MoveMissile();
} else if (weaponType == "Torpedo") {
    MoveTorpedo();
}
```

**Strategic** (æ…¢ä½†å¯ç»´æŠ¤):
```csharp
// æŠ•èµ„äºæŠ½è±¡ï¼Œæœªæ¥é›¶æˆæœ¬æ‰©å±•
MovementLogic logic = MovementFunctions.Resolve(config.MovementLogicName);
MovementState newState = logic(state, context, dt);
```

**å½“å‰å®è·µ**:
- âœ… ä½¿ç”¨ Generator æ¨¡å¼ï¼ˆå‰æœŸæŠ•èµ„ï¼ŒåæœŸæ”¶ç›Šï¼‰
- âœ… æ•°æ®é©±åŠ¨æ¶æ„ï¼ˆé…ç½®ä¸é€»è¾‘åˆ†ç¦»ï¼‰

---

### å‡½æ•°å¼ç¼–ç¨‹åŸåˆ™ï¼ˆFunctional Programmingï¼‰

#### 1. å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼ˆFirst-Class Functionsï¼‰
**æ ¸å¿ƒç†å¿µ**: å‡½æ•°å¯ä½œä¸ºå‚æ•°ã€è¿”å›å€¼ã€å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚

**å½“å‰å®è·µ**:
```csharp
// âœ… å‡½æ•°ä½œä¸ºè¿”å›å€¼
public delegate MovementState MovementLogic(MovementState state, ...);
public static MovementLogic Resolve(string name) {
    return name switch {
        "Ballistic" => Ballistic,
        "GuidedMissile" => GuidedMissile,
        _ => Linear
    };
}

// âœ… å‡½æ•°ä½œä¸ºå‚æ•°
public delegate Vector3? AimingLogic(Vector3 origin, ...);
Vector3? result = aimingLogic(myPos, FirePoint.forward, stats, target, predictor);
```

**æœªæ¥åº”ç”¨**:
```csharp
// âœ… å‡çº§ç³»ç»Ÿï¼šç»„åˆå‡½æ•°
public delegate float StatModifier(float baseValue);
StatModifier damageModifier = Compose(
    x => x * 1.5f,  // +50% ä¼¤å®³
    x => x + 10f    // +10 åŸºç¡€ä¼¤å®³
);
float finalDamage = damageModifier(baseDamage);
```

---

#### 2. çº¯å‡½æ•°ï¼ˆPure Functionsï¼‰
**æ ¸å¿ƒç†å¿µ**: æ— å‰¯ä½œç”¨ï¼Œç›¸åŒè¾“å…¥æ°¸è¿œè¿”å›ç›¸åŒè¾“å‡ºã€‚

**å½“å‰å®è·µ**:
```csharp
// âœ… çº¯å‡½æ•°ï¼šMovementFunctions.Ballistic
public static MovementState Ballistic(MovementState state, MovementContext ctx, float dt) {
    // ä¸ä¿®æ”¹è¾“å…¥ stateï¼Œè¿”å›æ–°çŠ¶æ€
    return new MovementState { ... };
}

// âœ… çº¯å‡½æ•°ï¼šBallisticsComputer.SolveInterception
public static bool SolveInterception(..., out Vector3 fireVelocity) {
    // è®¡ç®—ç»“æœï¼Œæ— å…¨å±€çŠ¶æ€ä¿®æ”¹
}
```

**é¿å…**:
```csharp
// âŒ éçº¯å‡½æ•°ï¼ˆä¿®æ”¹å…¨å±€çŠ¶æ€ï¼‰
public void Fire() {
    GlobalAmmoCount--;  // å‰¯ä½œç”¨
}
```

---

#### 3. ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰
**æ ¸å¿ƒç†å¿µ**: æ•°æ®ä¸€æ—¦åˆ›å»ºä¸å¯ä¿®æ”¹ã€‚

**å½“å‰å®è·µ**:
```csharp
// âœ… ä¸å¯å˜é…ç½®
public readonly WeaponConfig FlagshipGun = new WeaponConfig(...) {
    readonly Range = 150000f,
    readonly Damage = 30f,
};

// âœ… çŠ¶æ€ä¸å¯å˜ï¼ˆè¿”å›æ–°çŠ¶æ€ï¼‰
MovementState newState = MovementFunctions.GuidedMissile(state, ctx, dt);
```

**æœªæ¥æ”¹è¿›**:
```csharp
// ä½¿ç”¨ readonly struct
public readonly struct MovementState {
    public readonly Vector3 Position;
    public readonly Vector3 Velocity;
}
```

---

#### 4. å‡½æ•°ç»„åˆï¼ˆFunction Compositionï¼‰
**æ ¸å¿ƒç†å¿µ**: å°å‡½æ•°ç»„åˆæˆå¤§å‡½æ•°ã€‚

**ç›®æ ‡**:
```csharp
// å‡çº§ç³»ç»Ÿï¼šç»„åˆå¤šä¸ªä¿®é¥°ç¬¦
public static StatModifier Compose(params StatModifier[] modifiers) {
    return baseValue => modifiers.Aggregate(baseValue, (v, m) => m(v));
}

// ä½¿ç”¨
StatModifier finalModifier = Compose(
    IncreaseDamage(0.5f),
    IncreaseRange(1000f),
    DecreaseReload(0.2f)
);
```

---

### è®¾è®¡åŸåˆ™ä¼˜å…ˆçº§

#### P0 (å¿…é¡»éµå®ˆ)
1. **Deep Modules**: æ¥å£ç®€å•ï¼Œå®ç°æ·±å…¥
2. **Pull Complexity Downward**: å¤æ‚æ€§ä¸‹æ²‰
3. **First-Class Functions**: ä½¿ç”¨å‡½æ•°å¼æŠ½è±¡

#### P1 (å¼ºçƒˆå»ºè®®)
4. **Pure Functions**: å°½å¯èƒ½æ— å‰¯ä½œç”¨
5. **Immutability**: é…ç½®ä¸çŠ¶æ€ä¸å¯å˜
6. **Define Errors Out**: è®¾è®¡æ¶ˆé™¤é”™è¯¯

#### P2 (å‚è€ƒ)
7. **SOLID åŸåˆ™**: ä½œä¸ºæ¬¡è¦å‚è€ƒï¼ˆæ¥å£éš”ç¦»ã€ä¾èµ–å€’ç½®æœ‰ä»·å€¼ï¼‰
8. **Clean Code**: å‘½åä¸æ ¼å¼å‚è€ƒ

---

### åæ¨¡å¼æ¸…å•ï¼ˆAnti-Patterns to Avoidï¼‰

#### âŒ Shallow Modules
```csharp
// æ¥å£å¤æ‚ï¼Œå®ç°ç®€å• = Shallow
public float GetX() { return x; }
public float GetY() { return y; }
public void SetX(float v) { x = v; }
```

#### âŒ Information Leakage
```csharp
// æš´éœ²å†…éƒ¨å®ç°ç»†èŠ‚
public List<Vector3> GetInternalPathPoints() { return pathPoints; }
```

#### âŒ Pass-Through Methods
```csharp
// ä»…è½¬å‘è°ƒç”¨ï¼Œæ— ä»·å€¼
public void Fire() {
    weapon.Fire();  // ä»…è½¬å‘
}
```

#### âŒ Temporal Decomposition
```csharp
// æŒ‰æ—¶é—´é¡ºåºåˆ†è§£ï¼ˆé”™è¯¯ï¼‰
class Phase1Handler { }
class Phase2Handler { }
// åº”æŒ‰åŠŸèƒ½åˆ†è§£
class NavigationHandler { }
class CombatHandler { }
```

---

## ğŸ“š å‚è€ƒæ ‡å‡†ï¼ˆDesign Philosophyï¼‰

### æ ¸å¿ƒå‚è€ƒ
- **Book**: "A Philosophy of Software Design" (John Ousterhout, Stanford)
- **Concept**: Functional Programming Principles (Haskell/F# ç¤¾åŒº)
- **Paper**: "Out of the Tar Pit" (Moseley & Marks) - å¤æ‚åº¦ç®¡ç†

### æ¬¡è¦å‚è€ƒ
- **SOLID åŸåˆ™**: æ¥å£éš”ç¦»åŸåˆ™ (ISP)ã€ä¾èµ–å€’ç½® (DIP) æœ‰ä»·å€¼
- **Clean Code**: å‘½åä¸æ ¼å¼è§„èŒƒ
- **Game Programming Patterns**: çŠ¶æ€æœºã€å¯¹è±¡æ± ç­‰æ¨¡å¼

### ä¸æ¨è
- âŒ è¿‡åº¦æŠ½è±¡ï¼ˆä¸ºäº†æŠ½è±¡è€ŒæŠ½è±¡ï¼‰
- âŒ è¿‡åº¦åˆ†å±‚ï¼ˆæ¯å±‚åªè½¬å‘è°ƒç”¨ï¼‰
- âŒ è¿‡åº¦ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼ˆæ¨¡å¼é©±åŠ¨ > é—®é¢˜é©±åŠ¨ï¼‰

---

*æœ¬æ–‡æ¡£ä¸“æ³¨æŠ€æœ¯æ¶æ„éªŒè¯ï¼ŒéæŠ€æœ¯éƒ¨åˆ†ä»…ä½œå ä½ç¬¦*

# å¼€å‘æŒ‡å— (CONTRIBUTING.md)

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### Rebuild World å·¥ä½œæµ
**æ ¸å¿ƒåŸåˆ™**: Rebuild World æ˜¯å”¯ä¸€çœŸç†æ¥æº

```
ä¿®æ”¹é…ç½® (WeaponRegistry.cs)
    â†“
Ctrl + Shift + T (Rebuild World)
    â†“
è¿›å…¥ Play Mode éªŒè¯
```

**ç¦æ­¢**:
- âŒ æ‰‹åŠ¨ä¿®æ”¹ Prefab
- âŒ æ‰‹åŠ¨ä¿®æ”¹ ScriptableObject
- âŒ åœºæ™¯ä¸­æ‰‹åŠ¨é…ç½®æ­¦å™¨

---

## ğŸ“ ä»£ç æ ‡å‡†

### æ ¸å¿ƒåŸåˆ™
è¯¦è§ [TDD.md - æ¶æ„è®¾è®¡åŸåˆ™](TDD.md#æ¶æ„è®¾è®¡åŸåˆ™design-philosophy)

**P0 (å¿…é¡»éµå®ˆ)**:
1. **Deep Modules**: æ¥å£ç®€å•ï¼Œå®ç°æ·±å…¥
2. **Pull Complexity Downward**: å¤æ‚æ€§ä¸‹æ²‰
3. **First-Class Functions**: ä½¿ç”¨å‡½æ•°å¼æŠ½è±¡

**P1 (å¼ºçƒˆå»ºè®®)**:
4. **Pure Functions**: å°½å¯èƒ½æ— å‰¯ä½œç”¨
5. **Immutability**: é…ç½®ä¸çŠ¶æ€ä¸å¯å˜

---

## ğŸ”„ Git å·¥ä½œæµ

### åˆ†æ”¯ç­–ç•¥
```
main           # ç¨³å®šç‰ˆæœ¬
â”œâ”€â”€ develop    # å¼€å‘åˆ†æ”¯
â””â”€â”€ feature/*  # åŠŸèƒ½åˆ†æ”¯
```

### æäº¤è§„èŒƒ
```
feat: æ–°å¢ç¼–é˜Ÿç³»ç»Ÿ
fix: ä¿®å¤å¯¼å¼¹ä¿¯å†²è§’åº¦è®¡ç®—
docs: æ›´æ–° GDD å‡çº§ç³»ç»Ÿè®¾è®¡
refactor: é‡æ„ WeaponController
test: æ·»åŠ å¼¹é“è®¡ç®—å•å…ƒæµ‹è¯•
```

---

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•
```csharp
[Test]
public void BallisticCalculation_HighVelocity_ShouldNotOverflow() {
    var result = BallisticsComputer.SolveInterception(...);
    Assert.IsTrue(result);
}
```

### æ€§èƒ½åŸºå‡†
- 100+ å•ä½ç¼–é˜Ÿ < 16ms/frame
- å¼¹é“è®¡ç®— < 1ms
- æ­¦å™¨ç”Ÿæˆ < 100ms

---

## ğŸ“ æ–‡æ¡£æ›´æ–°

### ä¿®æ”¹æŠ€æœ¯ç³»ç»Ÿæ—¶
1. æ›´æ–°å¯¹åº” `Documentation/*.md`
2. æ›´æ–° `TDD.md` è¿›åº¦çŸ©é˜µ
3. æ›´æ–°è¯¥æ–‡ä»¶çš„"æœ€åæ›´æ–°"æ—¥æœŸ

### ä¿®æ”¹æ¸¸æˆè®¾è®¡æ—¶
1. æ›´æ–° `GDD.md`
2. ä½¿ç”¨ `[TBD]` æ ‡è®°æœªç¡®è®¤è®¾è®¡
3. å·²ç¡®è®¤è®¾è®¡ç§»é™¤ `[TBD]` æ ‡è®°

---

## ğŸ¯ æ·»åŠ æ–°åŠŸèƒ½æµç¨‹

### 1. æŠ€æœ¯åŠŸèƒ½ï¼ˆå¦‚æ–°æ­¦å™¨ç±»å‹ï¼‰
```
1. æ›´æ–° WeaponRegistry.csï¼ˆæ·»åŠ é…ç½®ï¼‰
2. æ›´æ–° MovementFunctions.csï¼ˆå¦‚éœ€æ–°è¿åŠ¨é€»è¾‘ï¼‰
3. Rebuild World éªŒè¯
4. æ›´æ–° Documentation/WEAPON_SYSTEM.md
```

### 2. æ¸¸æˆç³»ç»Ÿï¼ˆå¦‚ç¼–é˜Ÿç³»ç»Ÿï¼‰
```
1. åœ¨ GDD.md æ·»åŠ è®¾è®¡ï¼ˆTBD æ ‡è®°ï¼‰
2. ä¸å›¢é˜Ÿç¡®è®¤è®¾è®¡
3. åœ¨ TDD.md æ·»åŠ æŠ€æœ¯è§„åˆ’
4. å®ç° MVP
5. ç§»é™¤ TBD æ ‡è®°
```

---

## ğŸš« åæ¨¡å¼æ¸…å•

### âŒ é¿å…çš„åšæ³•
```csharp
// âŒ ç¡¬ç¼–ç 
if (weaponName == "Missile") { ... }

// âŒ ä¿®æ”¹å…¨å±€çŠ¶æ€
GlobalConfig.Damage += 10;

// âŒ è¿‡åº¦æŠ½è±¡
class AbstractWeaponFactoryBuilder { }
```

### âœ… æ¨èçš„åšæ³•
```csharp
// âœ… æ•°æ®é©±åŠ¨
var logic = MovementFunctions.Resolve(config.MovementLogicName);

// âœ… çº¯å‡½æ•°
return new MovementState { ... };

// âœ… Deep Module
BallisticsComputer.SolveInterception(...);
```

---

## ğŸ“š å¿…è¯»å‚è€ƒ

- [A Philosophy of Software Design](https://web.stanford.edu/~ouster/cgi-bin/book.php) (John Ousterhout)
- [Out of the Tar Pit](http://curtclifton.net/papers/MoseleyMarks06a.pdf) (Complexity Management)
- [Game Programming Patterns](https://gameprogrammingpatterns.com/) (Robert Nystrom)


---

## ğŸ“š æ–‡æ¡£ç»´æŠ¤è§„èŒƒï¼ˆMeta Documentationï¼‰

### æ–‡æ¡£ä½“ç³»æ¶æ„
```
README.md (å…¥å£)
    â†“
â”œâ”€â”€ GDD.md (æ¸¸æˆè®¾è®¡)
â”œâ”€â”€ TDD.md (æŠ€æœ¯æ¶æ„)
â””â”€â”€ CONTRIBUTING.md (æœ¬æ–‡æ¡£ - å¼€å‘è§„èŒƒ)
    â†“
Documentation/*.md (è¯¦ç»†è§„èŒƒ)
```

### æ–‡æ¡£æ›´æ–°è§¦å‘æ¡ä»¶

#### ğŸ”´ P0 - å¿…é¡»åŒæ­¥æ›´æ–°
**è§¦å‘æ¡ä»¶**: ä¿®æ”¹æ ¸å¿ƒç³»ç»Ÿã€æ·»åŠ æ–°åŠŸèƒ½ã€æ”¹å˜æ¶æ„

**æ›´æ–°æµç¨‹**:
```
1. ä¿®æ”¹ä»£ç 
2. æ›´æ–°å¯¹åº” Documentation/*.mdï¼ˆè¯¦ç»†è§„èŒƒï¼‰
3. æ›´æ–° TDD.md è¿›åº¦çŸ©é˜µï¼ˆå¦‚çŠ¶æ€æ”¹å˜ï¼‰
4. æ›´æ–° GDD.mdï¼ˆå¦‚æ¶‰åŠæ¸¸æˆè®¾è®¡ï¼‰
5. æäº¤ PR æ—¶é™„å¸¦æ–‡æ¡£æ›´æ–°
```

**æ£€æŸ¥æ¸…å•**:
- [ ] ä¿®æ”¹äº†æ­¦å™¨ç³»ç»Ÿ â†’ æ›´æ–° `Documentation/WEAPON_SYSTEM.md`
- [ ] ä¿®æ”¹äº†é£å¼¹ç³»ç»Ÿ â†’ æ›´æ–° `Documentation/MISSILE_SYSTEM.md`
- [ ] æ·»åŠ äº†æ–°æŠ€æœ¯æ¨¡å— â†’ åœ¨ `TDD.md` æ·»åŠ ç« èŠ‚ + åˆ›å»ºæ–° `Documentation/*.md`
- [ ] æ”¹å˜äº†æ¶æ„è®¾è®¡åŸåˆ™ â†’ æ›´æ–° `TDD.md - æ¶æ„è®¾è®¡åŸåˆ™` + `CONTRIBUTING.md`

#### ğŸŸ¡ P1 - å»ºè®®æ›´æ–°
**è§¦å‘æ¡ä»¶**: ä¿®æ”¹é…ç½®å‚æ•°ã€ä¼˜åŒ–æ€§èƒ½ã€ä¿®å¤ Bug

**æ›´æ–°æµç¨‹**:
- å°æ”¹åŠ¨ï¼šä»…æ›´æ–°å¯¹åº” `Documentation/*.md` çš„ç›¸å…³æ®µè½
- å‚æ•°è°ƒæ•´ï¼šæ›´æ–° `GDD.md` æˆ– `TDD.md` çš„é…ç½®è¡¨

#### ğŸŸ¢ P2 - å¯é€‰æ›´æ–°
**è§¦å‘æ¡ä»¶**: ä»£ç é‡æ„ï¼ˆä¸æ”¹å˜æ¥å£ï¼‰ã€æ³¨é‡Šä¿®æ”¹

**æ›´æ–°æµç¨‹**: æ— éœ€æ›´æ–°æ–‡æ¡£ï¼ˆé™¤éæ¥å£ç­¾åæ”¹å˜ï¼‰

---

### åå‘æ›´æ–°æœºåˆ¶ï¼ˆBidirectional Syncï¼‰

#### åŸåˆ™ï¼šæ–‡æ¡£é©±åŠ¨ â†’ ä»£ç å®ç°
```
è®¾è®¡é˜¶æ®µ: GDD.md + TDD.md (ç”¨ [TBD] æ ‡è®°)
    â†“
å®ç°é˜¶æ®µ: ç¼–å†™ä»£ç 
    â†“
éªŒè¯é˜¶æ®µ: ç§»é™¤ [TBD] æ ‡è®°
    â†“
æ–‡æ¡£åŒ–é˜¶æ®µ: æ›´æ–° Documentation/*.md
```

#### åå‘æ›´æ–°è§¦å‘å™¨

**åœºæ™¯ 1: ä»£ç æ”¹åŠ¨è§¦å‘æ–‡æ¡£æ›´æ–°**
```bash
# Git Hook ç¤ºä¾‹ï¼ˆå¯é€‰ï¼‰
# .git/hooks/pre-commit

# æ£€æŸ¥æ˜¯å¦ä¿®æ”¹äº†æ ¸å¿ƒæ–‡ä»¶
if git diff --cached --name-only | grep -E 'WeaponController|MovementFunctions'; then
    echo "âš ï¸  æ£€æµ‹åˆ°æ ¸å¿ƒç³»ç»Ÿä¿®æ”¹ï¼Œè¯·ç¡®è®¤å·²æ›´æ–°æ–‡æ¡£ï¼š"
    echo "   - Documentation/WEAPON_SYSTEM.md"
    echo "   - TDD.md"
fi
```

**åœºæ™¯ 2: PR å®¡æŸ¥æ£€æŸ¥æ¸…å•**
```markdown
## PR Checklist
- [ ] ä»£ç ä¿®æ”¹å·²å®Œæˆ
- [ ] ç›¸å…³ Documentation/*.md å·²æ›´æ–°
- [ ] TDD.md è¿›åº¦çŸ©é˜µå·²åŒæ­¥ï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] GDD.md å·²æ›´æ–°ï¼ˆå¦‚æ¶‰åŠæ¸¸æˆè®¾è®¡ï¼‰
- [ ] æ·»åŠ äº†ä»£ç æ³¨é‡Šï¼ˆå¤æ‚é€»è¾‘ï¼‰
```

---

### æ–‡æ¡£ä¸€è‡´æ€§ä¿è¯

#### è‡ªåŠ¨åŒ–æ£€æŸ¥ï¼ˆæœªæ¥æ”¹è¿›ï¼‰
```yaml
# .github/workflows/doc-check.yml
# ç¤ºä¾‹ï¼šæ£€æŸ¥æ–‡æ¡£å¼•ç”¨æ˜¯å¦æœ‰æ•ˆ
on: [push, pull_request]
jobs:
  doc-check:
    - name: Check Markdown Links
      run: markdown-link-check README.md TDD.md GDD.md
```

#### æ‰‹åŠ¨éªŒè¯æµç¨‹
**æ¯æ¬¡ Sprint ç»“æŸæ—¶**:
1. å®¡æŸ¥ `TDD.md` è¿›åº¦çŸ©é˜µæ˜¯å¦ä¸ä»£ç åŒæ­¥
2. æ£€æŸ¥æ‰€æœ‰ `Documentation/*.md` é“¾æ¥æ˜¯å¦æœ‰æ•ˆ
3. éªŒè¯ `GDD.md` ä¸­çš„ `[TBD]` æ˜¯å¦åŠæ—¶ç§»é™¤

---

### AI åŠ©æ‰‹åä½œè§„èŒƒ

#### å¯¹ AI çš„æŒ‡ä»¤
**å½“ AI è¿›è¡Œä»£ç ä¿®æ”¹æ—¶ï¼Œå¿…é¡»**:
1. âœ… å…ˆé˜…è¯» `TDD.md - æ¶æ„è®¾è®¡åŸåˆ™` ç†è§£è®¾è®¡å“²å­¦
2. âœ… æ£€æŸ¥ `Documentation/*.md` äº†è§£ç°æœ‰å®ç°ç»†èŠ‚
3. âœ… ä¿®æ”¹ä»£ç åä¸»åŠ¨æ›´æ–°ç›¸å…³æ–‡æ¡£
4. âœ… åœ¨ PR ä¸­æ³¨æ˜æ–‡æ¡£æ›´æ–°ä½ç½®

**ç¤ºä¾‹æç¤ºè¯**:
```
è¯·ä¿®æ”¹æ­¦å™¨ç³»ç»Ÿï¼Œæ·»åŠ æ¿€å…‰æ­¦å™¨æ”¯æŒã€‚
ä¿®æ”¹åè¯·åŒæ­¥æ›´æ–°ï¼š
1. Documentation/WEAPON_SYSTEM.mdï¼ˆæ·»åŠ æ¿€å…‰æ­¦å™¨ç« èŠ‚ï¼‰
2. TDD.mdï¼ˆæ›´æ–°æ­¦å™¨ç³»ç»Ÿå®Œæˆåº¦ï¼‰
```

---

### æ–‡æ¡£ç‰ˆæœ¬æ§åˆ¶

#### é‡è¦å˜æ›´è®°å½•ï¼ˆArchitecture Decision Recordsï¼‰
**æ¨¡æ¿**: `Documentation/ADR/YYYY-MM-DD-decision-title.md`

ç¤ºä¾‹ï¼š
```markdown
# ADR-001: é‡‡ç”¨ Deep Modules è€Œé SOLID

**æ—¥æœŸ**: 2025-11-26
**çŠ¶æ€**: âœ… å·²é‡‡çº³
**å†³ç­–è€…**: [å›¢é˜Ÿ]

## èƒŒæ™¯
ä¹‹å‰ä»£ç éµå¾ª SOLID åŸåˆ™ï¼Œå¯¼è‡´è¿‡åº¦æŠ½è±¡...

## å†³ç­–
æ”¹ç”¨ A Philosophy of Software Design çš„ Deep Modules åŸåˆ™...

## å½±å“
- TDD.md æ¶æ„è®¾è®¡åŸåˆ™ç« èŠ‚å·²æ›´æ–°
- CONTRIBUTING.md ä»£ç æ ‡å‡†å·²è°ƒæ•´
```

#### æ–‡æ¡£å˜æ›´æ—¥å¿—
åœ¨æ¯ä¸ªä¸»è¦æ–‡æ¡£åº•éƒ¨ç»´æŠ¤ï¼š
```markdown
---
## ğŸ“… å˜æ›´å†å²

### v2.0 - 2025-11-26
- é‡ç»„æ–‡æ¡£ç»“æ„ï¼ˆLiving Documentation æ¨¡å¼ï¼‰
- æ·»åŠ åå‘æ›´æ–°æœºåˆ¶

### v1.0 - 2025-11-20
- åˆå§‹ç‰ˆæœ¬
```

---

### å¿«é€Ÿå‚è€ƒï¼šæˆ‘è¯¥æ›´æ–°å“ªä¸ªæ–‡æ¡£ï¼Ÿ

| ä¿®æ”¹ç±»å‹ | æ›´æ–°æ–‡æ¡£ | ç¤ºä¾‹ |
|---------|---------|------|
| æ–°å¢æ¸¸æˆåŠŸèƒ½ | `GDD.md` | æ·»åŠ "ç”µå­æˆ˜"ç³»ç»Ÿ |
| æ–°å¢æŠ€æœ¯æ¨¡å— | `TDD.md` + æ–°å»º `Documentation/*.md` | å®ç°ç¼–é˜Ÿç³»ç»Ÿ |
| ä¿®æ”¹ç°æœ‰ç³»ç»Ÿ | å¯¹åº” `Documentation/*.md` | ä¿®æ”¹å¯¼å¼¹è½¬å‘é€Ÿåº¦ |
| æ”¹å˜æ¶æ„åŸåˆ™ | `TDD.md` + `CONTRIBUTING.md` | é‡‡ç”¨æ–°è®¾è®¡æ¨¡å¼ |
| ä¿®æ”¹å¼€å‘æµç¨‹ | `CONTRIBUTING.md` | æ·»åŠ  Git Hook |
| é…ç½®å‚æ•°è°ƒæ•´ | `GDD.md` æˆ–ç›¸å…³ `Documentation/*.md` | è°ƒæ•´æ­¦å™¨ä¼¤å®³å€¼ |

---

*æœ€åæ›´æ–°: 2025-11-26*
